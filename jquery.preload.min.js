/* jQuery.Preload
 * Created by Andrew Motoshin (http://htmlhero.ru)
 * 
 * Version: 1.1.1
 * Requires: jQuery 1.4+
 *
 */

(function(d){d.preload=function(){var f=[],i=function(a){for(var b=0;b<f.length;b++)if(f[b].src===a.src)return;f.push(a)},e=function(a,b,c){d.isFunction(c)&&c.call(a,b)};return function(a,b,c){if(typeof a!=="undefined"){d.isArray(a)||(a=[a]);if(d.isFunction(b)){c=b;b=0}var h=a.length,n=arguments.callee,j=null,l=0,g,m=function(){l++;if(l===h)if(j){e(a,false,c);n(j,b,c)}else e(a,true,c)};if(b>0&&b<h){j=a.slice(b,h);a=a.slice(0,b)}(h=a.length)||e(a,true,c);for(var k=0;k<h;k++){g=new Image;g.src=a[k]; i(g);if(g.complete)m();else g.onload=g.onerror=m}}}}();d.fn.preload=function(f){var i=this,e=[],a=/url\(['"]?([^"')]*)['"]?\)/i,b;this.find("*").add(this).each(function(){(b=a.exec(this.style.backgroundImage))&&e.push(b[1]);this.nodeName==="IMG"&&e.push(this.src)});d.preload(e,function(){d.isFunction(f)&&f.call(i.get())});return this}})(jQuery);