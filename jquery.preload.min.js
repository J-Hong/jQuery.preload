/**
 * jQuery.Preload
 * http://github.com/htmlhero/jQuery.preload
 *
 * Created by Andrew Motoshin
 * http://htmlhero.ru
 *
 * Version: 1.4.0
 * Requires: jQuery 1.6+
 *
 */

(function(h){var l=[];h.preload=function(a,c,d){if("undefined"!==typeof a){"string"===typeof a&&(a=[a]);2===arguments.length&&"function"===typeof c&&(d=c,c=0);var e=a.length,j;0<c&&c<e&&(j=a.slice(c,e),a=a.slice(0,c),e=a.length);if(e)for(var f=arguments.callee,g=0,k=function(){g++;g===e&&("function"===typeof d&&d.call(a,!j),f(j,c,d))},b,n=0;n<a.length;n++){b=new Image;b.src=a[n];a:{for(var m=0;m<l.length;m++)if(l[m].src===b.src){b=l[m];break a}l.push(b)}if(b.complete)k();else h(b).on("load error", k)}else"function"===typeof d&&d.call(a,!0)}};h.fn.preload=function(a){var c=this,d=c,e=[],j=/url\(['"]?([^"')]*)['"]?\)/i,f,g,k,b,d=d.find("*").add(d);d.each(function(){f=h(this).css("backgroundImage");f=f.split(", ");for(b=0;b<f.length;b++)g=f[b],-1!==g.indexOf("about:blank")||-1!==g.indexOf("data:image")||(k=j.exec(g))&&e.push(k[1]);"IMG"===this.nodeName&&e.push(this.src)});h.preload(e,function(){"function"===typeof a&&a.call(c.get())});return this}})(jQuery);